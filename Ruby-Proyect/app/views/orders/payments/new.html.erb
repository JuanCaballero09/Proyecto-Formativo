<h2>Pagar Orden <%= @order.code %></h2>

<%= form_with model: [@order, @payment], local: true, html: { id: "payment-form" } do |f| %>
  <p>Monto: <%= number_to_currency(@order.total) %></p>

  <div>
    <%= f.label :card_number, "Número de tarjeta" %>
    <%= f.text_field :card_number, maxlength: 16, required: true, class: "inputs-form-payment" %>
    <span id="error-card" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :exp_month, "Mes de expiración" %>
    <%= f.select :exp_month, (1..12).map { |m| [m.to_s.rjust(2, "0"), m] }, required: true, class: "inputs-form-payment" %>
    <span id="error-month" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :exp_year, "Año de expiración" %>
    <%= f.select :exp_year, (Date.today.year..(Date.today.year+10)).map { |y| [y, y] }, required: true, class: "inputs-form-payment" %>
    <span id="error-year" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :cvv, "CVC / CVV" %>
    <%= f.text_field :cvv, maxlength: 4, required: true, class: "inputs-form-payment" %>
    <span id="error-cvv" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :card_holder, "Nombre del titular" %>
    <%= f.text_field :card_holder, required: true, class: "inputs-form-payment" %>
    <span id="error-holder" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :email, "Correo electrónico" %>
    <%= f.email_field :email, required: true, class: "inputs-form-payment" %>
    <span id="error-email" class="error-msg"></span>
  </div>

  <%= f.hidden_field :installments, value: 1 %>

  <%= f.submit "Pagar", id: "pay-btn", disabled: true %>
<% end %>

<style>
.inputs-form-payment {
  padding: 10px;
  border-radius: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border: 2px solid #ddd;
  font-size: 16px;
  width: fit-content;
  box-sizing: border-box;
}

.input-error {
  border: 2px solid #e74c3c !important;
  background: #ffeaea;
  border-radius: 15px;
}

.input-success:focus, .input-success:active, .input-success {
  border-radius: 15px;
  border: 2px solid #27ae60 !important;
  background: #eaffea;
}

.error-msg {
  color: #e74c3c;
  font-size: 0.9em;
  display: block;
  margin-top: 2px;
  min-height: 18px;
}

</style>
