<h2>Pagar Orden <%= @order.code %></h2>

<%= form_with model: [@order, @payment], local: true, html: { id: "payment-form" } do |f| %>
  <p>Monto: <%= number_to_currency(@order.total) %></p>

  <div>
    <%= f.label :card_number, "Número de tarjeta" %>
    <%= f.text_field :card_number, maxlength: 16, required: true, class: "inputs-form-payment" %>
    <span id="error-card" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :exp_month, "Mes de expiración" %>
    <%= f.select :exp_month, (1..12).map { |m| [m.to_s.rjust(2, "0"), m] }, required: true, class: "inputs-form-payment" %>
    <span id="error-month" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :exp_year, "Año de expiración" %>
    <%= f.select :exp_year, (Date.today.year..(Date.today.year+10)).map { |y| [y, y] }, required: true, class: "inputs-form-payment" %>
    <span id="error-year" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :cvv, "CVC / CVV" %>
    <%= f.text_field :cvv, maxlength: 4, required: true, class: "inputs-form-payment" %>
    <span id="error-cvv" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :card_holder, "Nombre del titular" %>
    <%= f.text_field :card_holder, required: true, class: "inputs-form-payment" %>
    <span id="error-holder" class="error-msg"></span>
  </div>

  <div>
    <%= f.label :email, "Correo electrónico" %>
    <%= f.email_field :email, required: true, class: "inputs-form-payment" %>
    <span id="error-email" class="error-msg"></span>
  </div>

  <div>
    <%= f.check_box :accept_terms, required: true, class: "inputs-form-payment" %>
    <%= f.label :accept_terms do %>
      Acepto los 
      <a href="https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf?_gl=1*126i4oi*_gcl_aw*R0NMLjE3NTYyMjY0MjQuQ2p3S0NBand0clhGQmhCaUVpd0FFS2VuMXpvMWtBb2dwUkpBWklvc3JjNkJuZ3NIRktrMVRfT3hzODRBWnFTQXdhNGd2Z3JLaVhBWGhSb0NJVnNRQXZEX0J3RQ..*_gcl_au*MjA5MDc4MDUwMy4xNzU1NzE1ODAz*_ga*MTMzNjc3NjQyNC4xNzU1NzE1ODA1*_ga_BQ9HE5B63X*czE3NTYyMjY0MzUkbzE0JGcxJHQxNzU2MjI2ODQ2JGo2MCRsMCRoMA.." target="_blank">términos y condiciones</a>
      de Wompi
    <% end %>
  </div>

  <div>
    <%= f.check_box :accept_data, required: true, class: "inputs-form-payment" %>
    <%= f.label :accept_data do %>
      Acepto la
      <a target="_blank" href="https://wompi.com/assets/downloadble/autorizacion-tratamiento-datos-personales.pdf?_gl=1*jcrp79*_gcl_aw*R0NMLjE3NTYyMjY0MjQuQ2p3S0NBand0clhGQmhCaUVpd0FFS2VuMXpvMWtBb2dwUkpBWklvc3JjNkJuZ3NIRktrMVRfT3hzODRBWnFTQXdhNGd2Z3JLaVhBWGhSb0NJVnNRQXZEX0J3RQ..*_gcl_au*MjA5MDc4MDUwMy4xNzU1NzE1ODAz*_ga*MTMzNjc3NjQyNC4xNzU1NzE1ODA1*_ga_BQ9HE5B63X*czE3NTYyMjY0MzUkbzE0JGcxJHQxNzU2MjI2NTU3JGo0JGwwJGgw">autorización para la administración de datos personales</a>
      y conozco la 
      <a target="_blank" href="https://wompi.com/es/co/politica-de-privacidad?_gl=1*13f7i2g*_gcl_aw*R0NMLjE3NTYyMjY0MjQuQ2p3S0NBand0clhGQmhCaUVpd0FFS2VuMXpvMWtBb2dwUkpBWklvc3JjNkJuZ3NIRktrMVRfT3hzODRBWnFTQXdhNGd2Z3JLaVhBWGhSb0NJVnNRQXZEX0J3RQ..*_gcl_au*MjA5MDc4MDUwMy4xNzU1NzE1ODAz*_ga*MTMzNjc3NjQyNC4xNzU1NzE1ODA1*_ga_BQ9HE5B63X*czE3NTYyMjY0MzUkbzE0JGcxJHQxNzU2MjI2NTU3JGo0JGwwJGgw" target="_blank">política para el tratamiento de datos personales.</a>
    <% end %>
  </div>

  <%= f.hidden_field :installments, value: 1 %>

  <%= f.submit "Pagar", id: "pay-btn", disabled: true %>
<% end %>

<style>
.inputs-form-payment {
  padding: 10px;
  border-radius: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border: 2px solid #ddd;
  font-size: 16px;
  width: fit-content;
  box-sizing: border-box;
}

.input-error {
  border: 2px solid #e74c3c !important;
  background: #ffeaea;
  border-radius: 15px;
}

.input-success:focus, .input-success:active, .input-success {
  border-radius: 15px;
  border: 2px solid #27ae60 !important;
  background: #eaffea;
}

.error-msg {
  color: #e74c3c;
  font-size: 0.9em;
  display: block;
  margin-top: 2px;
  min-height: 18px;
}

</style>
