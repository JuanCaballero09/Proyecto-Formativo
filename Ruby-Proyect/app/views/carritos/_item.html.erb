<div id="carrito-item-<%= item.id %>" class="carrito-item-modern">
  <div class="item-imagen">
    <%= image_tag item.product.imagen, alt: item.product.nombre, class: "producto-imagen" %>
  </div>

  <div class="item-info">
    <div class="item-header">
      <h4 class="item-nombre"><%= item.product.nombre %></h4>
      <div class="item-precio-unitario">
        <strong class="precio-unitario" 
          data-precio="<%= item.precio %>" 
          data-locale="<%= I18n.locale %>">
          <% if I18n.locale == :en %>
            <%= number_to_currency(item.precio/ 4000, format:"%u %n")%>
          <% else %>
            <%= number_to_currency(item.precio, format:"%n %u")%>
          <% end %>  
        </strong>
      </div>
    </div>

    <div class="item-cantidad-control">
      <span class="cantidad-label">Cantidad:</span>
      <div class="cantidad-buttons">
        <%= button_to "-", carrito_item_path(item), method: :patch, data: { turbo_stream: true }, class: "btn-cantidad btn-menos" %>
        <span class="cantidad-display"><%= item.cantidad %></span>
        <%= button_to "+", incrementar_carrito_item_path(item), method: :put, data: { turbo_stream: true }, class: "btn-cantidad btn-mas" %>
      </div>
    </div>

    <div class="item-total">
      <span class="total-label">Total:</span>
      <span class="total-precio">
        <strong class="precio-total"
          data-precio="<%= item.precio %>"
          data-locale="<%= I18n.locale %>"
          data-cantidad="<%= item.cantidad %>">
          <% if I18n.locale == :en %>
            <%= number_to_currency(item.precio * item.cantidad / 4000, unit: "USD", format: "%u %n") %>
          <% else %>
            <%= number_to_currency(item.precio * item.cantidad, unit: "COP", format: "%n %u", precision: 2) %>
          <% end %>
        </strong>
      </span>
    </div>
    
    <div class="item-acciones">
      <%= button_to "🗑️ Eliminar", carrito_item_path(item), method: :delete, 
                    data: { turbo_confirm: "¿Eliminar este producto del carrito?" }, 
                    class: "btn-eliminar" %>
    </div>
  </div>
</div>
