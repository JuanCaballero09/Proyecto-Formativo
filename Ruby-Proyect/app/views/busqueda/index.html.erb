<div class="search-results-container">
  <!-- Header de b√∫squeda premium -->
  <div class="search-header">
    <div class="search-header-content">
      <h1 class="search-title">
        <i class="search-icon">üîç</i>
        Resultados de b√∫squeda
      </h1>
      <div class="search-query">
        Mostrando resultados para: <span class="highlight-query">"<%= params[:q] %>"</span>
      </div>
    </div>
  </div>

  <div class="search-content">
    <% total_results = (@grupos&.count || 0) + (@productos&.count || 0) %>
    
    <!-- Contador de resultados -->
    <div class="results-counter">
      <span class="results-number"><%= total_results %></span>
      <span class="results-text">resultado<%= total_results != 1 ? 's' : '' %> encontrado<%= total_results != 1 ? 's' : '' %></span>
    </div>

    <% if @grupos.any? %>
      <!-- Secci√≥n de grupos -->
      <div class="search-section">
        <div class="section-header-search">
          <h2 class="section-title">
            <i class="section-icon">üìÅ</i>
            Categor√≠as encontradas
          </h2>
          <span class="section-count"><%= @grupos.count %></span>
        </div>
        
        <div class="search-grid">
          <% @grupos.each do |grupo| %>
            <%= link_to grupo_products_path(grupo), class: "search-card grupo-card" do %>
              <div class="card-image">
                <% if grupo.imagen.attached? %>
                  <%= image_tag url_for(grupo.imagen), alt: grupo.nombre, class: "responsive-image" %>
                <% else %>
                  <%= image_tag 'LogoLogo.svg', alt: grupo.nombre, class: "responsive-image placeholder-image" %>
                <% end %>
                <div class="card-overlay">
                  <span class="card-type">Categor√≠a</span>
                </div>
              </div>
              <div class="card-content">
                <h3 class="card-title"><%= grupo.nombre %></h3>
                <p class="card-description">
                  <%= grupo.descripcion.present? ? truncate(grupo.descripcion, length: 100) : "Explora esta categor√≠a de productos" %>
                </p>
                <div class="card-action">
                  <span class="action-text">Ver productos</span>
                  <i class="action-arrow">‚Üí</i>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @productos.any? %>
      <!-- Secci√≥n de productos -->
      <div class="search-section">
        <div class="section-header-search">
          <h2 class="section-title">
            <i class="section-icon">üçΩÔ∏è</i>
            Productos encontrados
          </h2>
          <span class="section-count"><%= @productos.count %></span>
        </div>
        
        <div class="search-grid">
          <% @productos.each do |producto| %>
            <%= link_to grupo_product_path(producto.grupo, producto), class: "search-card producto-card" do %>
              <div class="card-image">
                <% if producto.imagen.attached? %>
                  <%= image_tag url_for(producto.imagen), alt: producto.nombre, class: "responsive-image" %>
                <% else %>
                  <%= image_tag 'LogoLogo.svg', alt: producto.nombre, class: "responsive-image placeholder-image" %>
                <% end %>
                <div class="card-overlay">
                  <span class="card-type">Producto</span>
                </div>
                <% if producto.precio.present? %>
                  <div class="price-badge">
                    $<%= number_with_delimiter(producto.precio) %>
                  </div>
                <% end %>
              </div>
              <div class="card-content">
                <h3 class="card-title"><%= producto.nombre %></h3>
                <p class="card-description">
                  <%= producto.descripcion.present? ? truncate(producto.descripcion, length: 100) : "Descubre este delicioso producto" %>
                </p>
                <div class="card-meta">
                  <span class="category-tag"><%= producto.grupo.nombre %></span>
                  <div class="card-action">
                    <span class="action-text">Ver detalles</span>
                    <i class="action-arrow">‚Üí</i>
                  </div>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Estado vac√≠o mejorado -->
    <% if @grupos.empty? && @productos.empty? %>
      <div class="empty-state">
        <div class="empty-state-icon">üîç</div>
        <h2 class="empty-state-title">No se encontraron resultados</h2>
        <p class="empty-state-description">
          No pudimos encontrar resultados para "<strong><%= params[:q] %></strong>".
        </p>
        <div class="empty-state-suggestions">
          <h3>Sugerencias:</h3>
          <ul>
            <li>Verifica la ortograf√≠a de las palabras</li>
            <li>Usa t√©rminos m√°s generales</li>
            <li>Prueba con sin√≥nimos o palabras relacionadas</li>
          </ul>
        </div>
        <div class="empty-state-actions">
          <%= link_to "Ver todas las categor√≠as", grupos_path, class: "empty-action-btn primary" %>
          <%= link_to "Explorar productos", products_path, class: "empty-action-btn secondary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

